<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìíŒê¸° í”„ë¡œê·¸ë¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background-color: #c91d1d;
            color: white;
            width: 400px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            position: relative;
            border: 3px solid black;
        }
        .title {
            font-size: 20px;
            font-weight: bold;
            font-style: italic;
            margin-bottom: 10px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .dropdown {
            background: white;
            color: #c91d1d;
            padding: 6px 12px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            cursor: pointer;
        }
        .toggle-wrapper {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .toggle-container {
            display: flex;
            align-items: center;
            background: white;
            padding: 4px 8px;
            border-radius: 15px;
        }
        .toggle-container label {
            font-size: 14px;
            color: #c91d1d;
            font-weight: bold;
            margin: 0 5px;
        }
        .toggle {
            width: 36px;
            height: 18px;
            background: #ccc;
            border-radius: 20px;
            cursor: pointer;
            position: relative;
        }
        .toggle::before {
            content: "";
            position: absolute;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            top: 1px;
            left: 2px;
            transition: 0.3s;
        }
        .toggle.active::before {
            left: 18px;
            background: #c91d1d;
        }
        .end-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: 2px solid white;
            color: white;
            font-size: 18px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
        }
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .product-list {
            background: white;
            color: #222;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-weight: bold;
            width: 90%;
        }
        .status {
            background: white;
            color: red;
            padding: 8px;
            border-radius: 5px;
            font-size: 14px;
            margin-top: 10px;
            text-align: right;
            font-weight: bold;
            width: 50%;
           /* ìœ„ì¹˜ ì •ë ¬ */
            align-self: flex-end;

            /* í•„ìš”ì‹œ ìš°ì¸¡ ì—¬ë°± ì¶”ê°€ */
            margin-right: 3%;
            }
        .add-btn {
            background: #e33;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            font-size: 14px;
            width: 90%;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="title">â˜… ìíŒê¸° í”„ë¡œê·¸ë¨ â˜…</div>

    <button class="end-btn">âˆ’</button>

    <div class="header">
        <button class="dropdown">â–½ ìíŒê¸° ìƒí’ˆ ëª©ë¡</button>
        <div class="toggle-wrapper">
            <div class="toggle-container">
                <label>í•œê¸€</label>
                <div class="toggle" id="toggle"></div>
                <label>ENG</label>
            </div>
        </div>
    </div>

    <div class="content">
        <div class="product-list">ìƒí’ˆ ëª©ë¡ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</div>
        <div class="status">â–² ì´ 0ê°œì˜ ìƒí’ˆì´ ìˆìŠµë‹ˆë‹¤.</div>
        <button th:href="@{/api/add}" class="add-btn"  id="addProductBtn">ìƒí’ˆ ì¶”ê°€í•˜ê¸°!</button>
    </div>
</div>

    <script>
        // ìƒí’ˆ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadProducts() {
            const res = await fetch('/api/products');
            const products = await res.json();

            const listEl = document.querySelector('.product-list');
            const statusEl = document.querySelector('.status');

            if (products.length === 0) {
                listEl.innerHTML = "ìƒí’ˆ ëª©ë¡ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.";
                statusEl.innerHTML = "â–² ì´ 0ê°œì˜ ìƒí’ˆì´ ìˆìŠµë‹ˆë‹¤.";
                return;
            }

            listEl.innerHTML = products.map(p =>
                `<div>ğŸ§ƒ ${p.name} - ${p.price}ì› (${p.expireDate})</div>`
            ).join('');
            statusEl.innerHTML = `â–² ì´ ${products.length}ê°œì˜ ìƒí’ˆì´ ìˆìŠµë‹ˆë‹¤.`;
        }

        // í•œê¸€/ENG í† ê¸€
        document.getElementById('toggle').addEventListener('click', function () {
            this.classList.toggle('active');
        });

        // ìƒí’ˆ ì¶”ê°€ ë²„íŠ¼ (ì„ì‹œë¡œ prompt ì‚¬ìš©)
        document.getElementById('addProductBtn').addEventListener('click', async function () {
            const name = prompt("ìƒí’ˆ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:");
            const price = prompt("ìƒí’ˆ ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”:");
            const expireDate = prompt("ìœ í†µê¸°í•œì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 2025-12-31):");

            if (!name || !price || !expireDate) {
                alert("ëª¨ë“  ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            const product = {
                name: name,
                price: parseInt(price),
                expireDate: expireDate
            };

            const res = await fetch('/api/products', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(product)
            });

            if (res.ok) {
                alert("ìƒí’ˆì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!");
                loadProducts();
            } else {
                alert("ìƒí’ˆ ì¶”ê°€ ì‹¤íŒ¨!");
            }
        });

        // í˜ì´ì§€ ë¡œë”© ì‹œ ìƒí’ˆ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = loadProducts;
</script>

</body>
</html>
